<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>Mandelbrot Fractal</title>
    <style media="screen">
      * {
        font-family: Verdana, sans-serif;
        margin: 0;
      }


      body {
      	background: #d0d0d0;
      }

      #fractal-graphics {
        /*border: 1px black solid;*/
        display: none;
        margin: none;
      }

      h1 {
        font-weight: normal;
        font-size: 1.5em;
      }
      #launch {
        font-size: 1em;
        position: fixed;
        left: 50%;
        top: 45%;
        transform: translate(-50%, -50%);
        -webkit-transform: translate(-50%, -50%);
        text-align: center;
      }

      #launch:hover #launch-text {
        color: #339900;
      }

      a:hover {
        /*background-color: #404040;*/
      }

      #large-fractal {
        font-size: .75em;
        position: fixed;
        bottom: 0;
        right: 0;
        padding-bottom: 1vh;
        padding-right: 1vw;
      }

      #large-fractal:hover {
        color: #339900;
      }

      a {
        cursor: pointer;
      }

    </style>
  </head>
  <body>
    <main>
      <a id="launch">
        <h1>The Mandelbrot Fractal</h1>
        <div class="instructions">click to zoom in</div>
        <div class="instructions">option-click to zoom out</div>
        <div id="launch-text">launch fractal</div>
      </a>
      <div>
        code and color algorithm by rafrex
      </div>
    </main>

    <a id="large-fractal">
      launch 1,793 escape time fractal - warning, slow!!!
    </a>


    <div id="fractal-graphics">
      <canvas id="fractal"></canvas>
      <canvas id="zoom-box"></canvas>
    </div>


    <script type="text/javascript" src="lib/fractal.js"></script>

    <script type="text/javascript">
      (function(){

        // console.log(window.innerWidth);
        // console.log(window.innerHeight);

        // var width = window.innerWidth * devicePixelRatio;
        // var height = window.innerHeight * devicePixelRatio;
        // var width = window.innerWidth;
        // var height = window.innerHeight;
        // width = 76;
        // height = 76;

        // var w = width / devicePixelRatio;
        // var h = height / devicePixelRatio;


        var launcher = document.getElementById("launch");

        var fractalGraphics = document.getElementById("fractal-graphics");
        var fractal = document.getElementById("fractal");

        document.getElementById("launch").addEventListener("click", function(event){
          // launcher.style.display = "none";
          fractalGraphics.style.display = "block";
          fractal.webkitRequestFullScreen();
        })

        document.addEventListener("webkitfullscreenchange", function(){
          if (!document.webkitIsFullScreen) {
            fractalGraphics.style.display = "none"
          }
        });

        var screenW = window.screen.width;
        var screenH = window.screen.height;

        var width = screenW * window.devicePixelRatio;
        var height = screenH * window.devicePixelRatio;
        document.getElementById("fractal").setAttribute(
          "style", "width: " + screenW + "px; height: " + screenH + "px;"
        )

        var canvasEl = document.getElementById("fractal");
        var ctx = canvasEl.getContext("2d");
        canvasEl.width = width;
        canvasEl.height = height;

        new mandelbrotFractal.Fractal(
          canvasEl,
          ctx,
          canvasEl.width,
          canvasEl.height
        ).start(ctx);
      })();
    </script>

  </body>
</html>

<!-- d.addEventListener("click", d.webkitRequestFullScreen) -->
